<html><head><meta charset="utf-8"><title>Lifetime</title><link href="../../css.css" rel="stylesheet" type="text/css"><script src="../../js.js" type="text/javascript"></script><style>.t-example-live-link {display:none !important} .t-sidebar-body {display:none}\nbody{min-width:0}\ndiv.mw-geshi{width:95%}\ndiv#content {width:auto !important} div#content{background-image:none; margin-left:0px;} .t-lines {background:inherit !important} pre, div.mw-geshi {width: 100% !important} body {background:white !important} div#content {width:100% !important} pre, div.mw-geshi {width:auto !important} .t-example-live-link, #mw-head, #cpp-footer-base {display:none !important} .t-navbar-menu > div {position:relative !important}</style></head><body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-cpp_language_lifetime skin-cppreference2 action-view cpp-navbar">
        <!-- header -->
        <div class="noprint" id="mw-head">
            <div id="cpp-head-first-base">
                <div id="cpp-head-first">
                    <h5><a href="http://en.cppreference.com/">
                        cppreference.com                        </a></h5>
                    <div id="cpp-head-search">
                        
<!-- 0 -->
<div id="p-search">
	<h5><label for="searchInput">Search</label></h5>
	<form action="/mwiki/index.php" id="searchform">
		<input name="title" type="hidden" value="Special:Search">
				<div id="simpleSearch">
						<input accesskey="f" id="searchInput" name="search" title="Search cppreference.com [f]">						<button id="searchButton" name="button" title="Search the pages for this text" type="submit"><img alt="Search" src="../../../mwiki/skins/cppreference2/images/search-ltr.png"></button>					</div>
			</form>
</div>

<!-- /0 -->
                    </div>
                    <div id="cpp-head-personal">
                        
<!-- 0 -->
<div class="" id="p-personal">
<span id="pt-createaccount"><a href="http://en.cppreference.com/mwiki/index.php?title=Special:UserLogin&amp;returnto=cpp%2Flanguage%2Flifetime&amp;type=signup">Create account</a></span>	<div class="menu">
        <ul>
<li id="pt-login"><a accesskey="o" href="http://en.cppreference.com/mwiki/index.php?title=Special:UserLogin&amp;returnto=cpp%2Flanguage%2Flifetime" title="You are encouraged to log in; however, it is not mandatory [o]">Log in</a></li>        </ul>
    </div>
</div>

<!-- /0 -->
                    </div>

                </div>
            </div>
            <div id="cpp-head-second-base">
                <div id="cpp-head-second">
                    <div id="cpp-head-tools-left">
                        
<!-- 0 -->
<div class="vectorTabs" id="p-namespaces">
	<h5>Namespaces</h5>
	<ul>
					<li class="selected" id="ca-nstab-main"><span><a accesskey="c" href="./lifetime.html" title="View the content page [c]">Page</a></span></li>
					<li class="new" id="ca-talk"><span><a accesskey="t" href="http://en.cppreference.com/mwiki/index.php?title=Talk:cpp/language/lifetime&amp;action=edit&amp;redlink=1" title="Discussion about the content page [t]">Discussion</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div class="vectorMenu emptyPortlet" id="p-variants">
		<h5><span>Variants</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
                    </div>
                    <div id="cpp-head-tools-right">
                        
<!-- 0 -->
<div class="vectorTabs" id="p-views">
	<h5>Views</h5>
	<ul>
					<li class="selected" id="ca-view"><span><a href="./lifetime.html">View</a></span></li>
					<li id="ca-edit"><span><a accesskey="e" href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit" title="You can edit this page. Please use the preview button before saving [e]">Edit</a></span></li>
					<li class="collapsible" id="ca-history"><span><a accesskey="h" href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=history" title="Past revisions of this page [h]">History</a></span></li>
			</ul>
</div>

<!-- /0 -->

<!-- 1 -->
<div class="vectorMenu emptyPortlet" id="p-cactions">
	<h5><span>Actions</span><a href="#"></a></h5>
	<div class="menu">
		<ul>
					</ul>
	</div>
</div>

<!-- /1 -->
                    </div>
                </div>
            </div>
        </div>
        <!-- /header -->
        <!-- content -->
        <div id="cpp-content-base">
            <div id="content">
                <a id="top"></a>
                <div id="mw-js-message" style="display:none;"></div>
                                <!-- firstHeading -->
                <h1 class="firstHeading" id="firstHeading">Lifetime</h1>
                <!-- /firstHeading -->
                <!-- bodyContent -->
                <div id="bodyContent">
                                        <!-- tagline -->
                    <div id="siteSub">From cppreference.com</div>
                    <!-- /tagline -->
                                        <!-- subtitle -->
                    <div id="contentSub"><span class="subpages">&lt; <a href="../../cpp.html" title="cpp">cpp</a>&lrm; | <a href="../language.html" title="cpp/language">language</a></span></div>
                    <!-- /subtitle -->
                                                            <!-- bodycontent -->
                    <div class="mw-content-ltr" dir="ltr" id="mw-content-text" lang="en"><div class="t-navbar" style=""><div class="t-navbar-sep">&nbsp;</div><div class="t-navbar-head"><a href="../../cpp.html" title="cpp"> C++</a><div class="t-navbar-menu"><div><div><table cellpadding="0" class="t-nv-begin" style="line-height:1.1em;">
<tbody><tr class="t-nv"><td colspan="5"> <a href="../language.html" title="cpp/language"> Language</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../header.html" title="cpp/header"> Headers</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../concept.html" title="cpp/concept"> Library concepts</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../utility.html#Language_support" title="cpp/utility"> Language support library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../error.html" title="cpp/error"> Diagnostics library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../utility.html" title="cpp/utility"> Utilities library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../string.html" title="cpp/string"> Strings library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../container.html" title="cpp/container"> Containers library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../algorithm.html" title="cpp/algorithm"> Algorithms library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../iterator.html" title="cpp/iterator"> Iterators library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../numeric.html" title="cpp/numeric"> Numerics library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../io.html" title="cpp/io"> Input/output library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../locale.html" title="cpp/locale"> Localizations library</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../regex.html" title="cpp/regex"> Regular expressions library</a> <span class="t-mark-rev t-since-cxx11">(C++11)</span> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../atomic.html" title="cpp/atomic"> Atomic operations library</a> <span class="t-mark-rev t-since-cxx11">(C++11)</span> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../thread.html" title="cpp/thread"> Thread support library</a> <span class="t-mark-rev t-since-cxx11">(C++11)</span> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../filesystem.html" title="cpp/filesystem"> Filesystem library</a> <span class="t-mark-rev t-since-cxx17">(C++17)</span> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../experimental.html" title="cpp/experimental"> Technical Specifications</a> </td></tr>
</tbody></table></div><div><span class="editsection noprint plainlinks" title="Edit this template"><a class="external text" href="http://en.cppreference.com/mwiki/index.php?title=Template:cpp/navbar_content&amp;action=edit" rel="nofollow">[edit]</a></span></div></div></div></div><div class="t-navbar-sep">&nbsp;</div><div class="t-navbar-head"><a href="../language.html" title="cpp/language"> C++ language</a></div><div class="t-navbar-sep">&nbsp;</div><div class="t-navbar-head"><a href="./basic_concepts.html" title="cpp/language/basic concepts"> Basic Concepts</a><div class="t-navbar-menu"><div><div style="display:inline-block">
<div><table cellpadding="0" class="t-nv-begin" style="">
<tbody><tr class="t-nv"><td colspan="5"> <a href="../keyword.html" title="cpp/keyword"> language keywords</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./translation_phases.html" title="cpp/language/translation phases"> phases of translation</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="../comment.html" title="cpp/comment"> comments </a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./main_function.html" title="cpp/language/main function"> the main() function</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./identifiers.html" title="cpp/language/identifiers"> names and identifiers</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./type.html" title="cpp/language/type"> types</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./types.html" title="cpp/language/types"> fundamental types</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./object.html" title="cpp/language/object"> objects</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./scope.html" title="cpp/language/scope"> scope</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <strong class="selflink"> object lifetime</strong> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./storage_duration.html" title="cpp/language/storage duration"> storage duration and linkage</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./definition.html" title="cpp/language/definition"> definitions and ODR</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./lookup.html" title="cpp/language/lookup"> name lookup</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./qualified_lookup.html" title="cpp/language/qualified lookup">qualified name lookup</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./unqualified_lookup.html" title="cpp/language/unqualified lookup">unqualified name lookup</a> </td></tr>
<tr class="t-nv"><td colspan="5"> <a href="./memory_model.html" title="cpp/language/memory model"> memory model</a> </td></tr>
</tbody></table></div>
</div><div><span class="editsection noprint plainlinks" title="Edit this template"><a class="external text" href="http://en.cppreference.com/mwiki/index.php?title=Template:cpp/language/basics/navbar_content&amp;action=edit" rel="nofollow">[edit]</a></span></div></div></div></div><div class="t-navbar-sep">&nbsp;</div></div>
<p>Every <a href="./object.html" title="cpp/language/object">object</a> and <a href="./reference.html" title="cpp/language/reference">reference</a> has a <i>lifetime</i>, which is a runtime property: for any object or reference, there is a point of execution of a program when its lifetime begins, and there is a moment when it ends.
</p>
<ul><li> For any object of class or aggregate types if it, or any of its subobjects, is initialized by anything other than the <a href="./default_constructor.html#Trivial_default_constructor" title="cpp/language/default constructor">trivial default constructor</a>, lifetime begins when initialization ends.
</li><li> For any object of class types whose <a href="./destructor.html#Trivial_destructor" title="cpp/language/destructor">destructor</a> is not trivial, lifetime ends when the execution of the destructor begins.
</li><li> Lifetime of a member of a <a href="./union.html" title="cpp/language/union">union</a> begins when that member is made active
</li><li> For all other objects (class objects initialized by a trivial default constructor, non-class objects, arrays of those, etc.), lifetime begins when the properly-aligned storage for the object is allocated and ends when the storage is deallocated or reused by another object.
</li></ul>
<p>Lifetime of an object is equal to or is nested within the lifetime of its storage, see <a href="./storage_duration.html" title="cpp/language/storage duration">storage duration</a>.
</p>
 <table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx14"><td>
<p>Lifetime of a <a href="./reference.html" title="cpp/language/reference">reference</a> is exactly its storage duration.
</p>
</td>
<td><span class="t-mark-rev t-until-cxx14">(until C++14)</span></td></tr><tr class="t-rev t-since-cxx14"><td> 
<p>The lifetime of a <a href="./reference.html" title="cpp/language/reference">reference</a> begins when its initialization is complete and ends as if it were a scalar object.
</p>
</td>
<td><span class="t-mark-rev t-since-cxx14">(since C++14)</span></td></tr>
</tbody></table>
<p>Note: the lifetime of the referred object may end before the end of the lifetime of the reference, which makes <a href="./reference.html#Dangling_references" title="cpp/language/reference">dangling references</a> possible.
</p><p>Lifetimes of member objects and base subobjects begin and end following <a href="./initializer_list.html#Initialization_order" title="cpp/language/initializer list">class initialization order</a>.
</p>
<table class="toc" id="toc"><tbody><tr><td><div id="toctitle"><h2>Contents</h2><span class="toctoggle">&nbsp;[<a class="internal" href="#" id="togglelink">hide</a>]&nbsp;</span></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Temporary_object_lifetime"><span class="tocnumber">1</span> <span class="toctext">Temporary object lifetime</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Storage_reuse"><span class="tocnumber">2</span> <span class="toctext">Storage reuse</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Access_outside_of_lifetime"><span class="tocnumber">3</span> <span class="toctext">Access outside of lifetime</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Notes"><span class="tocnumber">4</span> <span class="toctext">Notes</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Defect_reports"><span class="tocnumber">5</span> <span class="toctext">Defect reports</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#See_also"><span class="tocnumber">6</span> <span class="toctext">See also</span></a></li>
</ul>
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=1" title="Edit section: Temporary object lifetime">edit</a>]</span> <span class="mw-headline" id="Temporary_object_lifetime">Temporary object lifetime</span></h3>
<p>Temporary objects are created <span class="t-rev-inl t-since-cxx17"><span>when a prvalue is <a href="./implicit_conversion.html#Temporary_materialization" title="cpp/language/implicit conversion">materialized</a> so that it can be used as a glvalue, which occurs</span> <span><span class="t-mark-rev t-since-cxx17">(since C++17)</span></span></span> in the following situations:
</p>
<ul><li> <a href="./reference_initialization.html" title="cpp/language/reference initialization">binding a reference to a prvalue</a>
</li></ul>
 <table class="t-rev-begin">
<tbody><tr class="t-rev t-until-cxx17"><td>
<ul><li> returning a prvalue from a function
</li><li> <a href="./expressions.html#Conversions" title="cpp/language/expressions">conversion</a> that creates a prvalue (<a href="./explicit_cast.html" title="cpp/language/explicit cast">including</a> <span class="t-c"><span class="mw-geshi cpp source-cpp">T<span class="br0">(</span>a,b,c<span class="br0">)</span></span></span> and <span class="t-c"><span class="mw-geshi cpp source-cpp">T<span class="br0">{</span><span class="br0">}</span></span></span>)
</li><li> <span class="t-rev-inl t-since-cxx11"><span> <a href="./lambda.html" title="cpp/language/lambda">lambda expression</a>,</span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>
</li><li> <a href="./copy_initialization.html" title="cpp/language/copy initialization">copy-initialization</a> that requires conversion of the initializer,
</li><li> <span class="t-rev-inl t-since-cxx11"><span><a href="./list_initialization.html" title="cpp/language/list initialization">list-initialization</a> that constructs an <span class="t-lc"><a href="../utility/initializer_list.html" title="cpp/utility/initializer list">std::initializer_list</a></span>,</span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>
</li><li> <a href="./reference_initialization.html" title="cpp/language/reference initialization">reference-initialization</a> to a different but convertible type or to a bitfield.
</li></ul>
</td>
<td><span class="t-mark-rev t-until-cxx17">(until C++17)</span></td></tr>
<tr class="t-rev t-since-cxx17"><td>
<ul><li> when <a href="./list_initialization.html" title="cpp/language/list initialization">initializing</a> an object of type <span class="t-c"><span class="mw-geshi cpp source-cpp"><a href="../utility/initializer_list.html"><span class="kw960">std::<span class="me2">initializer_list</span></span></a><span class="sy1">&lt;</span>T<span class="sy1">&gt;</span></span></span> from a braced-init-list
</li><li> when performing <a href="./operator_member_access.html#Built-in_member_access_operators" title="cpp/language/operator member access">member access</a> on a class prvalue
</li><li> when performing an <a href="./array.html#Array-to-pointer_decay" title="cpp/language/array">array-to-pointer</a> conversion or <a href="./operator_member_access.html#Built-in_subscript_operator" title="cpp/language/operator member access">subscripting</a> on an array prvalue
</li><li> for unevaluated operands in <a href="./sizeof.html" title="cpp/language/sizeof">sizeof</a> and <a href="./typeid.html" title="cpp/language/typeid">typeid</a>
</li><li> when a prvalue appears as a <a href="./expressions.html#Discarded-value_expressions" title="cpp/language/expressions">discarded-value expression</a>
</li><li> if supported by the implementation, when passing or returning an object of trivially-copyable type in a <a href="./operator_other.html#Built-in_function_call_operator" title="cpp/language/operator other">function call expression</a> (this models passing structs in CPU registers)
</li></ul>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
 <table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx17"><td>
<p>The materialization of a temporary object is generally delayed as long as possible in order to avoid creating unnecessary temporary object: see <a href="./copy_elision.html" title="cpp/language/copy elision">copy elision</a>
</p>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
<p>All temporary objects are destroyed as the last step in evaluating the full-expression that (lexically) contains the point where they were created, and if multiple temporary objects were created, they are destroyed in the order opposite to the order of creation. This is true even if that evaluation ends in throwing an exception.
</p><p>There are two exceptions from that:
</p>
<ul><li> The lifetime of a temporary object may be extended by binding to a const lvalue reference <span class="t-rev-inl t-since-cxx11"><span>or to an rvalue reference</span> <span><span class="t-mark-rev t-since-cxx11">(since C++11)</span></span></span>, see <a href="./reference_initialization.html#Lifetime_of_a_temporary" title="cpp/language/reference initialization">reference initialization</a> for details.
</li></ul>
 <table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx11"><td>
<ul><li> The lifetime of a temporary object created when evaluating the default arguments of a default constructor used to initialize an element of an array ends before the next element of the array begins initialization.</li></ul></td>

<td><span class="t-mark-rev t-since-cxx11">(since C++11)</span></td></tr>
</tbody></table>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=2" title="Edit section: Storage reuse">edit</a>]</span> <span class="mw-headline" id="Storage_reuse">Storage reuse</span></h3>
<p>A program is not required to call the destructor of an object to end its lifetime if the object is <a href="./destructor.html#Trivial_destructor" title="cpp/language/destructor">trivially-destructible</a> or if the program does not rely on the side effects of the destructor. However, if a program ends the lifetime of an non-trivial object, it must ensure that a new object of the same type is constructed in-place (e.g. via placement new) before the destructor may be called implicitly, i.e. due to scope exit or exception for automatic objects, due to thread exit for thread-local objects, or due to program exit for static objects; otherwise the behavior is undefined.
</p>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">class</span> T <span class="br0">{</span><span class="br0">}</span><span class="sy4">;</span> <span class="co1">// trivial</span>
<span class="kw1">struct</span> B <span class="br0">{</span>
    ~B<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span><span class="br0">}</span> <span class="co1">// non-trivial</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">void</span> x<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    <span class="kw4">long</span> <span class="kw4">long</span> n<span class="sy4">;</span> <span class="co1">// automatic, trivial</span>
    new <span class="br0">(</span><span class="sy3">&amp;</span>n<span class="br0">)</span> <span class="kw4">double</span><span class="br0">(</span><span class="nu16">3.14</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// reuse with a different type okay</span>
<span class="br0">}</span> <span class="co1">// okay</span>
<span class="kw4">void</span> h<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    B b<span class="sy4">;</span> <span class="co1">// automatic non-trivially destructible</span>
    b.~B<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// end lifetime (not required, since no side-effects)</span>
    new <span class="br0">(</span><span class="sy3">&amp;</span>b<span class="br0">)</span> T<span class="sy4">;</span> <span class="co1">// wrong type: okay until the destructor is called</span>
<span class="br0">}</span> <span class="co1">// destructor is called: undefined behavior</span></pre></div></div>
<p>It is undefined behavior to reuse storage that is or was occupied by a const complete object of static, thread-local, or automatic storage duration because such objects may be stored in read-only memory.
</p>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> B <span class="br0">{</span>
    B<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// non-trivial</span>
    ~B<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// non-trivial</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">const</span> B b<span class="sy4">;</span> <span class="co1">// const static</span>
<span class="kw4">void</span> h<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
    b.~B<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// end the lifetime of b</span>
    new <span class="br0">(</span><span class="kw1">const_cast</span><span class="sy1">&lt;</span>B<span class="sy2">*</span><span class="sy1">&gt;</span><span class="br0">(</span><span class="sy3">&amp;</span>b<span class="br0">)</span><span class="br0">)</span> <span class="kw4">const</span> B<span class="sy4">;</span> <span class="co1">// undefined behavior: attempted reuse of a const</span>
<span class="br0">}</span></pre></div></div>
<p>If a new object is created at the address that was occupied by another object, then all pointers, references, and the name of the original object will automatically refer to the new object and, once the lifetime of the new object begins, can be used to manipulate the new object, but only if the following conditions are satisfied:
</p>
<ul><li> the storage for the new object exactly overlays the storage location which the original object occupied
</li><li> the new object is of the same type as the original object (ignoring the top-level cv-qualifiers)
</li><li> the type of the original object is not const-qualified
</li><li> if the original object had class type, it does not contain any non-static data member whose type is const-qualified or a reference type
</li><li> the original object was a most derived object of type T and the new object is a most derived object of type T (that is, they are not base class subobjects).
</li></ul>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> C <span class="br0">{</span>
  <span class="kw4">int</span> i<span class="sy4">;</span>
  <span class="kw4">void</span> f<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw4">const</span> C<span class="sy3">&amp;</span> operator<span class="sy1">=</span><span class="br0">(</span> <span class="kw4">const</span> C<span class="sy3">&amp;</span> <span class="br0">)</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">const</span> C<span class="sy3">&amp;</span> C<span class="sy4">::</span><span class="me2">operator</span><span class="sy1">=</span><span class="br0">(</span> <span class="kw4">const</span> C<span class="sy3">&amp;</span> other<span class="br0">)</span> <span class="br0">{</span>
  <span class="kw1">if</span> <span class="br0">(</span> this <span class="sy3">!</span><span class="sy1">=</span> <span class="sy3">&amp;</span>other <span class="br0">)</span> <span class="br0">{</span>
    this<span class="sy2">-</span><span class="sy1">&gt;</span>~C<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>          <span class="co1">// lifetime of *this ends</span>
    new <span class="br0">(</span>this<span class="br0">)</span> C<span class="br0">(</span>other<span class="br0">)</span><span class="sy4">;</span> <span class="co1">// new object of type C created</span>
    f<span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>                 <span class="co1">// well-defined</span>
  <span class="br0">}</span>
  <span class="kw1">return</span> <span class="sy2">*</span>this<span class="sy4">;</span>
<span class="br0">}</span>
C c1<span class="sy4">;</span>
C c2<span class="sy4">;</span>
c1 <span class="sy1">=</span> c2<span class="sy4">;</span> <span class="co1">// well-defined</span>
c1.<span class="me1">f</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>  <span class="co1">// well-defined; c1 refers to a new object of type C</span></pre></div></div>
 <table class="t-rev-begin">
<tbody><tr class="t-rev t-since-cxx17"><td>
<p>If the conditions listed above are not met, a valid pointer to the new object may still be obtained by applying the pointer optimization barrier <a href="../utility/launder.html" title="cpp/utility/launder"><tt>std::launder</tt></a>
</p><p>Similarly, if an object is created in the storage of a class member or array element, the created object is only a subobject (member or element) of the original object&#39;s containing object if:
</p>
<ul><li> the lifetime of the containing object has begun and not ended
</li><li> the storage for the new object exactly overlays the storage of the original object
</li><li> the new object is of the same type as the original object (ignoring cv-qualification).
</li></ul>
<p>Otherwise (such as if the subobject contains a reference member or a const subobject), the name of the original subobject cannot be used to access the new object without <span class="t-lc"><a href="../utility/launder.html" title="cpp/utility/launder">std::launder</a></span>:
</p>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> X <span class="br0">{</span> <span class="kw4">const</span> <span class="kw4">int</span> n<span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span>
<span class="kw1">union</span> U <span class="br0">{</span> X x<span class="sy4">;</span> <span class="kw4">float</span> f<span class="sy4">;</span> <span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">void</span> tong<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  U u <span class="sy1">=</span> <span class="br0">{</span> <span class="br0">{</span> <span class="nu0">1</span> <span class="br0">}</span> <span class="br0">}</span><span class="sy4">;</span>
  u.<span class="me1">f</span> <span class="sy1">=</span> <span class="nu0">5</span>.<span class="me1">f</span><span class="sy4">;</span>                          <span class="co1">// OK, creates new subobject of &#39;u&#39;</span>
  X <span class="sy2">*</span>p <span class="sy1">=</span> new <span class="br0">(</span><span class="sy3">&amp;</span>u.<span class="me1">x</span><span class="br0">)</span> X <span class="br0">{</span><span class="nu0">2</span><span class="br0">}</span><span class="sy4">;</span>            <span class="co1">// OK, creates new subobject of &#39;u&#39;</span>
  <a href="../error/assert.html"><span class="kw774">assert</span></a><span class="br0">(</span>p<span class="sy2">-</span><span class="sy1">&gt;</span>n <span class="sy1">==</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>                  <span class="co1">// OK</span>
  <a href="../error/assert.html"><span class="kw774">assert</span></a><span class="br0">(</span><span class="sy2">*</span><a href="../utility/launder.html"><span class="kw1122">std::<span class="me2">launder</span></span></a><span class="br0">(</span><span class="sy3">&amp;</span>u.<span class="me1">x</span>.<span class="me1">n</span><span class="br0">)</span> <span class="sy1">==</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// OK</span>
  <a href="../error/assert.html"><span class="kw774">assert</span></a><span class="br0">(</span>u.<span class="me1">x</span>.<span class="me1">n</span> <span class="sy1">==</span> <span class="nu0">2</span><span class="br0">)</span><span class="sy4">;</span>                 <span class="co1">// undefined: &#39;u.x&#39; does not name the new subobject</span>
<span class="br0">}</span></pre></div></div>
<p>As a special case, objects can be created in arrays of <code>unsigned char</code> or <a href="../types/byte.html" title="cpp/types/byte"><tt>std::byte</tt></a> (in which case it is said that the array <i>provides storage</i> for the object) if
</p>
<ul><li> the lifetime of the array has begun and not ended
</li><li> the storage for the new object fits entirely within the array
</li><li> there is no smaller array object that satisfies these constraints.
</li></ul>
<p>If that portion of the array previously provided storage for another object, the lifetime of that object ends because its storage was reused, however the lifetime of the array itself does not end (its storage is not considered to have been reused)
</p>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">template</span><span class="sy1">&lt;</span><span class="kw1">typename</span> ...<span class="me1">T</span><span class="sy1">&gt;</span>
<span class="kw1">struct</span> AlignedUnion <span class="br0">{</span>
  alignas<span class="br0">(</span>T...<span class="br0">)</span> <span class="kw4">unsigned</span> <span class="kw4">char</span> data<span class="br0">[</span>max<span class="br0">(</span>sizeof<span class="br0">(</span>T<span class="br0">)</span>...<span class="br0">)</span><span class="br0">]</span><span class="sy4">;</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">int</span> f<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  AlignedUnion<span class="sy1">&lt;</span><span class="kw4">int</span>, <span class="kw4">char</span><span class="sy1">&gt;</span> au<span class="sy4">;</span>
  <span class="kw4">int</span> <span class="sy2">*</span>p <span class="sy1">=</span> new <span class="br0">(</span>au.<span class="me1">data</span><span class="br0">)</span> <span class="kw4">int</span><span class="sy4">;</span>     <span class="co1">// OK, au.data provides storage</span>
  <span class="kw4">char</span> <span class="sy2">*</span>c <span class="sy1">=</span> new <span class="br0">(</span>au.<span class="me1">data</span><span class="br0">)</span> <span class="kw4">char</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span> <span class="co1">// OK, ends lifetime of *p</span>
  <span class="kw4">char</span> <span class="sy2">*</span>d <span class="sy1">=</span> new <span class="br0">(</span>au.<span class="me1">data</span> <span class="sy2">+</span> <span class="nu0">1</span><span class="br0">)</span> <span class="kw4">char</span><span class="br0">(</span><span class="br0">)</span><span class="sy4">;</span>
  <span class="kw1">return</span> <span class="sy2">*</span>c <span class="sy2">+</span> <span class="sy2">*</span>d<span class="sy4">;</span> <span class="co1">// OK</span>
<span class="br0">}</span></pre></div></div>
</td>
<td><span class="t-mark-rev t-since-cxx17">(since C++17)</span></td></tr>
</tbody></table>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=3" title="Edit section: Access outside of lifetime">edit</a>]</span> <span class="mw-headline" id="Access_outside_of_lifetime">Access outside of lifetime</span></h3>
<p>Before the lifetime of an object has started but after the storage which the object will occupy has been allocated or, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, the following uses of the glvalue expression that identifies that object are undefined:
</p>
<ol><li> Lvalue to rvalue conversion (e.g. function call to a function that takes a value).
</li><li> Access to a non-static data member or a call to a non-static member function.
</li><li> Binding a reference to a virtual base class subobject.
</li><li> <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">dynamic_cast</span></span></span> or <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw1">typeid</span></span></span> expressions.
</li></ol>
<p>The above rules apply to pointers as well (binding a reference to virtual base is replaced by implicit conversion to a pointer to virtual base), with two additional rules:
</p>
<ol><li> <a href="./static_cast.html" title="cpp/language/static cast"><tt>static_cast</tt></a> of a pointer to storage without an object is only allowed when casting to (possibly cv-qualified) <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">void</span><span class="sy2">*</span></span></span>.
</li><li> Pointers to storage without an object that were cast to possibly cv-qualified <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">void</span><span class="sy2">*</span></span></span> can only be <a href="./static_cast.html" title="cpp/language/static cast"><tt>static_cast</tt></a> to pointers to possibly cv-qualified <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">char</span></span></span>, possibly cv-qualified <span class="t-c"><span class="mw-geshi cpp source-cpp"><span class="kw4">unsigned</span> <span class="kw4">char</span></span></span>, or possibly cv-qualified <a href="../types/byte.html" title="cpp/types/byte"><tt>std::byte</tt></a>.
</li></ol>
<p>During construction and destruction, other restrictions apply, see <a href="./virtual.html#During_construction_and_destruction" title="cpp/language/virtual">virtual function calls during construction and destruction</a>.
</p>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=4" title="Edit section: Notes">edit</a>]</span> <span class="mw-headline" id="Notes">Notes</span></h3>
<p>The difference in the end of lifetime rules between non-class objects (end of storage duration) and class objects (reverse order of construction) matters in the following example:
</p>
<div class="mw-geshi" dir="ltr" style="text-align: left;"><div class="cpp source-cpp"><pre class="de1"><span class="kw1">struct</span> A <span class="br0">{</span>
  <span class="kw4">int</span><span class="sy2">*</span> p<span class="sy4">;</span>
  ~A<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span> <a href="../io/cout.html"><span class="kw1758">std::<span class="me2">cout</span></span></a> <span class="sy1">&lt;&lt;</span> <span class="sy2">*</span>p<span class="sy4">;</span> <span class="br0">}</span> <span class="co1">// if n outlives a, prints 123</span>
<span class="br0">}</span><span class="sy4">;</span>
<span class="kw4">void</span> f<span class="br0">(</span><span class="br0">)</span> <span class="br0">{</span>
  A a<span class="sy4">;</span>
  <span class="kw4">int</span> n <span class="sy1">=</span> <span class="nu0">123</span><span class="sy4">;</span> <span class="co1">// if n does not outlive a, this is optimized out (dead store)</span>
  a.<span class="me1">p</span> <span class="sy1">=</span> <span class="sy3">&amp;</span>n<span class="sy4">;</span>
<span class="br0">}</span></pre></div></div>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=5" title="Edit section: Defect reports">edit</a>]</span> <span class="mw-headline" id="Defect_reports">Defect reports</span></h3>
<p>The following behavior-changing defect reports were applied retroactively to previously published C++ standards.
</p>
<table class="dsctable" style="font-size:0.8em">
<tbody><tr>
<th> DR
</th>
<th> Applied to
</th>
<th> Behavior as published
</th>
<th> Correct behavior
</th></tr>
<tr>
<td> <a class="external text" href="http://open-std.org/JTC1/SC22/WG21/docs/cwg_defects.html#2012" rel="nofollow">CWG 2012</a>
</td>
<td> C++14
</td>
<td> lifetime of references was specified to match storage duration, requiring that<br>extern references are alive before their initializers run
</td>
<td> lifetime begins at initialization
</td></tr></tbody></table>
<h3><span class="editsection">[<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=edit&amp;section=6" title="Edit section: See also">edit</a>]</span> <span class="mw-headline" id="See_also">See also</span></h3>
<table class="t-dsc-begin">

<tbody><tr class="t-dsc">
<td colspan="2"> <div class="t-dsc-see"><span><a href="../../c/language/lifetime.html" title="c/language/lifetime">C documentation</a></span> for <span class="t-dsc-see-tt"><span>lifetime</span></span></div>
</td></tr>

</tbody></table>

<!-- 
NewPP limit report
Preprocessor visited node count: 1932/1000000
Preprocessor generated node count: 5157/1000000
Postâ€expand include size: 41319/2097152 bytes
Template argument size: 12787/2097152 bytes
Highest expansion depth: 13/40
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key mwiki1-mwiki_en_:pcache:idhash:13096-0!*!0!!en!*!* and timestamp 20180328221913 -->
</div>                    <!-- /bodycontent -->
                                        <!-- printfooter -->
                    <div class="printfooter">
                    Retrieved from &quot;<a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;oldid=98213">http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;oldid=98213</a>&quot;                    </div>
                    <!-- /printfooter -->
                                                            <!-- catlinks -->
                    <div class="catlinks catlinks-allhidden" id="catlinks"><div class="mw-hidden-catlinks mw-hidden-cats-hidden" id="mw-hidden-catlinks">Hidden category: <ul><li><a href="http://en.cppreference.com/w/Category:Pages_with_unreviewed_CWG_DR_marker" title="Category:Pages with unreviewed CWG DR marker">Pages with unreviewed CWG DR marker</a></li></ul></div></div>                    <!-- /catlinks -->
                                                            <div class="visualClear"></div>
                    <!-- debughtml -->
                                        <!-- /debughtml -->
                </div>
                <!-- /bodyContent -->
            </div>
        </div>
        <!-- /content -->
        <!-- footer -->
        <div class="noprint" id="cpp-footer-base">
            <div id="footer">
                        <div id="cpp-navigation">
            <h5>Navigation</h5>
            <ul>
<li id="n-Support-us"><a href="http://www.cppreference.com/support" rel="nofollow">Support us</a></li><li id="n-recentchanges"><a accesskey="r" href="http://en.cppreference.com/w/Special:RecentChanges" title="A list of recent changes in the wiki [r]">Recent changes</a></li><li id="n-FAQ"><a href="http://en.cppreference.com/w/Cppreference:FAQ">FAQ</a></li><li id="n-Offline-version"><a href="http://en.cppreference.com/w/Cppreference:Archives">Offline version</a></li>            </ul>
        </div>
                        <div id="cpp-toolbox">
            <h5><span>Toolbox</span><a href="#"></a></h5>
            <ul>
<li id="t-whatlinkshere"><a accesskey="j" href="http://en.cppreference.com/w/Special:WhatLinksHere/cpp/language/lifetime" title="A list of all wiki pages that link here [j]">What links here</a></li><li id="t-recentchangeslinked"><a accesskey="k" href="http://en.cppreference.com/w/Special:RecentChangesLinked/cpp/language/lifetime" title="Recent changes in pages linked from this page [k]">Related changes</a></li><li id="t-upload"><a accesskey="u" href="http://upload.cppreference.com/w/Special:Upload" title="Upload files [u]">Upload file</a></li><li id="t-specialpages"><a accesskey="q" href="http://en.cppreference.com/w/Special:SpecialPages" title="A list of all special pages [q]">Special pages</a></li><li id="t-print"><a accesskey="p" href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;printable=yes" rel="alternate" title="Printable version of this page [p]">Printable version</a></li><li id="t-permalink"><a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;oldid=98213" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="http://en.cppreference.com/mwiki/index.php?title=cpp/language/lifetime&amp;action=info">Page information</a></li>            </ul>
        </div>
                        <div id="cpp-languages">
            <div><ul><li>In other languages</li></ul></div>
            <div><ul>
<li class="interwiki-zh"><a href="http://zh.cppreference.com/w/cpp/language/lifetime" hreflang="zh" lang="zh" title="cpp/language/lifetime">&#x4E2D;&#x6587;</a></li>            </ul></div>
        </div>
            <ul id="footer-info">
                                    <li id="footer-info-lastmod"> This page was last modified on 13 January 2018, at 21:37.</li>
                                    <li id="footer-info-viewcount">This page has been accessed 62,994 times.</li>
                            </ul>
                    <ul id="footer-places">
                                    <li id="footer-places-privacy"><a href="http://en.cppreference.com/w/Cppreference:Privacy_policy" title="Cppreference:Privacy policy">Privacy policy</a></li>
                                    <li id="footer-places-about"><a href="http://en.cppreference.com/w/Cppreference:About" title="Cppreference:About">About cppreference.com</a></li>
                                    <li id="footer-places-disclaimer"><a href="http://en.cppreference.com/w/Cppreference:General_disclaimer" title="Cppreference:General disclaimer">Disclaimers</a></li>
                            </ul>
                                    <ul class="noprint" id="footer-icons">
                                    <li id="footer-poweredbyico">
                                            <a href="http://www.mediawiki.org/"><img alt="Powered by MediaWiki" height="31" src="../../../mwiki/skins/common/images/poweredby_mediawiki_88x31.png" width="88"></a>                                            <a href="http://qbnz.com/highlighter/"><img alt="Powered by GeSHi" height="31" src="../../../../upload.cppreference.com/mwiki/images/2/2b/powered_by_geshi_88x31.png" width="88"></a>                                            <a href="http://www.tigertech.net/referral/cppreference.com"><img alt="Hosted by Tiger Technologies" height="31" src="../../../../upload.cppreference.com/mwiki/images/9/94/powered_by_tigertech_88x31.png" width="88"></a>                                        </li>
                                </ul>
                        <div style="clear:both">
            </div>
            </div>
        </div>
        <!-- /footer -->
        



<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-2828341-1']);
_gaq.push(['_setDomainName', 'cppreference.com']);
_gaq.push(['_trackPageview']);
</script><!-- Served in 0.037 secs. -->
	
<!-- Cached 20180329060848 -->

</body><!-- Online page at http://en.cppreference.com/w/cpp/language/lifetime --></html>